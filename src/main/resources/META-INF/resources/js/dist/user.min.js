$(document).ready(function(){var o="#joinStep02",t=".YAGGWAN_AGREE",e="#joinUserId",n="#joinPw",i="#joinPwConfirm",a="#joinUserName",c="#joinUserEmail",l="#joinUserEmail2",r="#joinUserPhoneF",d="#joinUserPhoneM",s="#joinUserPhoneL",h="#joinStep03Id",u="#joinStep03Pw",p="#joinStep03Name",m="#joinStep03Email",v="#joinStep03Phone",f=".joinBox",j="#btnJoinStep01Next",g=!1,S="",x=[e,n,i,a,c,d,s,l],k=null;function w(){return!!(hotplace.validation.isFormNotEmpty(x)&&function(){var o=!0,t=$(e);g&&S==$.trim(t.val())?hotplace.validation.ctrlValidMsg(t,!1,".DUP"):(hotplace.validation.ctrlValidMsg(t,!0,".DUP"),o=!1);return o}()&&function(){var o=$(n),t=$(i),e=!0;$.trim(o.val())==$.trim(t.val())?hotplace.validation.ctrlValidMsg(t,!1,".CONFIRM"):(hotplace.validation.ctrlValidMsg(t,!0,".CONFIRM"),e=!1);return e}()&&hotplace.validation.isValidEmail($(c),$(l).val())&&hotplace.validation.isValidPhoneM($(d))&&hotplace.validation.isValidPhoneL($(s)))}function N(){$(t).each(function(){this.checked=!1}),function(){g=!1,S="";for(var o=x.length-1;o>=0;o--)$(x[o]).val("");$(l).val("X"),$(r).val("010"),$("#joinStep02 .helpCont").css("display","none")}(),$(h).text(""),$(u).text(""),$(p).text(""),$(m).text(""),$(v).text("")}$(document).on("change",t,function(){var o,e,n=$(j);o=function(o){o?n.is(":disabled")&&n.removeAttr("disabled"):n.prop("disabled",!0)},e=!0,$(t).each(function(){if("Y"==$(this).data("required")&&!$(this).is(":checked"))return e=!1,!1}).promise().done(function(){o&&o(e)})}),$(document).on("click",j,function(){$(f).hide(),$(o).show()}),$(document).on("click","#btnJoinStep02Prev",function(){$(f).hide(),$("#joinStep01").show()}),$(document).on("click","#btnJoinStep02Next",function(){w()&&($(h).text($(e).val()),$(u).text(hotplace.util.maskAll($(n).val())),$(p).text($(a).val()),$(m).text(hotplace.util.getEmail($(c),$(l))),$(v).text($(r).val()+"-"+$(d).val()+"-"+$(s).val()),k={id:$(e).val(),userName:$(a).val(),password:$(n).val(),phone:$(v).text(),email:$(v).text()},$(f).hide(),$("#joinStep03").show())}),$(document).on("click","#btnStep03Cancel",function(){N(),$(f).hide(),$(o).show()}),$(document).on("click","#btnStep03Ok",function(){hotplace.ajax({url:"user/join",data:JSON.stringify(k),contentType:"application/json; charset=UTF-8",success:function(o,t,e){o.success?(N(),$(f).hide(),$("#joinStep04").show()):e.errCode=hotplace.error.JOIN},error:function(o,t,e){o.errCode=hotplace.error.JOIN}})}),$(document).on("click","#btnJoinIdCheck",function(){var o=$(e).val();hotplace.ajax({url:"user/checkId?id="+o,method:"GET",success:function(t,n,i){t.success&&(t.errCode==hotplace.error.DUP_ID?i.errCode=t.errCode:(g=!0,S=o,hotplace.validation.ctrlValidMsg($(e),!1,".DUP")))}})}),$(document).on("click","#btnLogin",function(){$("#id").val(),$("#pw").val();hotplace.ajax({url:"login",method:"POST",dataType:"text",data:$("#loginFm").serialize(),success:function(o,t,e){var n=$.parseJSON(o);n.success?(hotplace.dom.closeModal(),hotplace.dom.toggleLogin()):e.errCode=n.errCode},error:function(o,t,e){}})}),$(document).on("click","#joinBtn",function(){hotplace.dom.showJoinForm({width:600},function(){N()})}),$(document).on("click","#btnStep04Login",function(){hotplace.dom.showLoginForm()}),$(document).on("keydown","#pw",function(o){if(13==o.which){o.target.value;$(_btnLoginId).trigger("click")}}),hotplace.validation.phone("#joinStep02 .NUMBER_ONLY")});