$(document).ready(function(){var o="#btnLogin",t="#joinStep02",e=".YAGGWAN_AGREE",n="#joinUserId",i="#joinPw",a="#joinPwConfirm",c="#joinUserName",l="#joinUserEmail",r="#joinUserEmail2",d="#joinUserPhoneF",s="#joinUserPhoneM",h="#joinUserPhoneL",u="#joinStep03Id",p="#joinStep03Pw",m="#joinStep03Name",v="#joinStep03Email",f="#joinStep03Phone",j=".joinBox",g="#btnJoinStep01Next",S=!1,x="",k=[n,i,a,c,l,s,h,r],w=null;function N(){return!!(hotplace.validation.isFormNotEmpty(k)&&function(){var o=!0,t=$(n);S&&x==$.trim(t.val())?hotplace.validation.ctrlValidMsg(t,!1,".DUP"):(hotplace.validation.ctrlValidMsg(t,!0,".DUP"),o=!1);return o}()&&function(){var o=$(i),t=$(a),e=!0;$.trim(o.val())==$.trim(t.val())?hotplace.validation.ctrlValidMsg(t,!1,".CONFIRM"):(hotplace.validation.ctrlValidMsg(t,!0,".CONFIRM"),e=!1);return e}()&&hotplace.validation.isValidEmail($(l),$(r).val())&&hotplace.validation.isValidPhoneM($(s))&&hotplace.validation.isValidPhoneL($(h)))}function P(){$(e).each(function(){this.checked=!1}),function(){S=!1,x="";for(var o=k.length-1;o>=0;o--)$(k[o]).val("");$(r).val("X"),$(d).val("010"),$("#joinStep02 .helpCont").css("display","none")}(),$(u).text(""),$(p).text(""),$(m).text(""),$(v).text(""),$(f).text("")}$(document).on("change",e,function(){var o,t,n=$(g);o=function(o){o?n.is(":disabled")&&n.removeAttr("disabled"):n.prop("disabled",!0)},t=!0,$(e).each(function(){if("Y"==$(this).data("required")&&!$(this).is(":checked"))return t=!1,!1}).promise().done(function(){o&&o(t)})}),$(document).on("click",g,function(){$(j).hide(),$(t).show()}),$(document).on("click","#btnJoinStep02Prev",function(){$(j).hide(),$("#joinStep01").show()}),$(document).on("click","#btnJoinStep02Next",function(){N()&&($(u).text($(n).val()),$(p).text(hotplace.util.maskAll($(i).val())),$(m).text($(c).val()),$(v).text(hotplace.util.getEmail($(l),$(r))),$(f).text($(d).val()+"-"+$(s).val()+"-"+$(h).val()),w={id:$(n).val(),userName:$(c).val(),password:$(i).val(),phone:$(f).text(),email:$(v).text()},$(j).hide(),$("#joinStep03").show())}),$(document).on("click","#btnStep03Cancel",function(){P(),$(j).hide(),$(t).show()}),$(document).on("click","#btnStep03Ok",function(){hotplace.ajax({url:"user/join",data:JSON.stringify(w),contentType:"application/json; charset=UTF-8",success:function(o,t,e){o.success?(P(),$(j).hide(),$("#joinStep04").show()):e.errCode=hotplace.error.JOIN},error:function(o,t,e){o.errCode=hotplace.error.JOIN}})}),$(document).on("click","#btnJoinIdCheck",function(){var o=$(n).val();hotplace.ajax({url:"user/checkId?id="+o,method:"GET",success:function(t,e,i){t.success&&(t.errCode==hotplace.error.DUP_ID?i.errCode=t.errCode:(S=!0,x=o,hotplace.validation.ctrlValidMsg($(n),!1,".DUP")))}})}),$(document).on("click",o,function(){$("#id").val(),$("#pw").val();hotplace.ajax({url:"login",method:"POST",dataType:"text",data:$("#loginFm").serialize(),success:function(o,t,e){var n=$.parseJSON(o);n.success?(hotplace.dom.closeModal(),hotplace.dom.toggleLogin()):e.errCode=n.errCode},error:function(o,t,e){}})}),$(document).on("click","#joinBtn",function(){hotplace.dom.showJoinForm({width:600},function(){P()})}),$(document).on("click","#btnStep04Login",function(){hotplace.dom.showLoginForm()}),$(document).off("keydown","#pw").on("keydown","#pw",function(t){if(13==t.which){t.target.value;$(o).trigger("click")}}),hotplace.validation.phone("#joinStep02 .NUMBER_ONLY")});